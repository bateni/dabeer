\usemodule[dabeer]
\tracemathtrue

\definemathframed[graymath]
[
  frame=off,
  location=mathematics,
  background=color,
  backgroundcolor=lightgray,
  backgroundoffset=2pt
  ]

\starttext

حروفچینی متون ریاضی همواره از نِقاط قوت \TEX\ بوده است.
از آن‌جایی که \CONTEXT\ نیز در این زمینه تقریباً با \TEX\ یکسان است
نباید تفاوت چشمگیری وجود داشته باشد.
با این حال، مهم‌ترین مسئله استفاده از ارقام فارسی در فرمول‌های ریاضی است.

به عنوان مثال، می‌دانیم که مجموع $n$ عدد صحیح نخست برابر است با $n\frac{n+1}{2}$.
به عبارت دیگر،
%
\startformula
\sum_{i=1}^n i = n\frac{n+1}{2}.
\stopformula

در جهان امروز، از کودک دبستانی گرفته تا افراد میان‌سال، کیست که فرمول معروف
\eqref[eq:mc2]
را نشنیده باشد و آن را منسوب به آلبرت اینشتین نداند؟
با این وجود، تعداد آنانی که درکی از این رابطه ریاضی دارند اندک است.

\placeformula[eq:mc2]
\startformula
E = mc^2.
\stopformula

در \CONTEXT\ استفاده از قاب‌ها بسیار ساده است.
مثلاً قاب موجود در فرمول زیر به‌سادگی نشان می‌دهد که 
 $\log(1+x) = x + O(x^2)$.

\startformula
\log(1+x) = \graymath{x- \displaystyle{x^2\over2}} + {x^3 \over 3} + \cdots
\stopformula



%در ادامه به یک محاسبه پیچیده‌تر نگاهی می‌اندازیم.

%% TODO: multi-line formula with integration and sums and greek letters.

%% TODO: inline math $$ and \m{}

%% TODO: maybe theorems, etc.

\stoptext
